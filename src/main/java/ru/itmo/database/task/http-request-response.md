Если клиент-серверное взаимодействие осуществляется по http протоколу (HyperText Transfer Protocol), они обмениваются
сообщениями:

1. Сообщение, передаваемое от клиента на сервер содержит:
    1) Стоку запроса, например `http://localhost:8080/editions`. Без нее сообщение не может быть отправлено. Строка
       содержит версию протокола, метод запроса, адрес сервера, порт, запрашиваемый ресурс (/editions). Может содержать
       данные, передаваемые на сервер.
    2) HTTP-заголовки содержат дополнительную информацию о передаваемом сообщении или клиенте.
    3) Тело сообщения используется для передачи данных и может быть пустым.

2. Сообщение, передаваемое от сервера клиенту содержит:
    1) Строку статуса. Она содержит версию http протокола, статус ответа, комментарий, описывающий статус.
    2) HTTP-заголовки содержат дополнительную информацию о передаваемом сообщении или сервере.
    3) Тело сообщения используется для передачи данных и может быть пустым.

### Версии http протокола: HTTP/1.X или HTTP/2.X.

### Методы http запроса позволяют указать конкретное действие, ожидаемое от сервера:

1. GET - запрашивает ресурс. Сообщение, передаваемое методом GET может содержать дополнительные параметры в строке
   запроса.
2. POST - позволяет отправить данные в теле сообщения. Данные могут быть разных типов: текст, бинарные данные.
   Используется для отправки логин-паролей, загрузке файлов. Может указывать серверу, что необходимо сохранить
   информацию о новом ресурсе.
3. PUT - позволяет отправить данные в теле сообщения. Может указывать серверу, что необходимо сохранить
   информацию о новом ресурсе или обновить информацию о существующем.
4. PATCH - позволяет отправить данные в теле сообщения. Может указывать серверу, что необходимо обновить информацию о
   существующем ресурсе.
5. DELETE - указывает серверу, что необходимо удалить информацию о ресурсе.
6. HEAD - позволит получить только заголовки, которые сервер вернул бы при получении GET-запроса к тому же ресурсу.
   Может использоваться для того, чтобы узнать размер запрашиваемого ресурса перед его загрузкой.
7. OPTIONS - обычно используется для запроса информации о сервере.

### Данные, передаваемы на сервер в строке запроса: `?param01=value&param02=value`.

Начинаются со знака вопроса (?), за которым следует пара 'параметр=значение'. При передачи нескольких параметров, они
объединяются через (&). Используются сервером по своему усмотрению, например, для уточнения информации о запрашиваемом
ресурсе. Например, запрос `books?title=java`, переданный метод GET, может сообщить серверу о том, что необходимо вернуть
книги, в названии которых содержится 'java'.

### Http-заголовок представляет собой строку формата 'Имя Заголовка:Значение'.

Типы заголовков:

1. Общего назначения - применяется как к запросам, так и к ответам, но не имеет отношения к данным, передаваемым в теле.
2. Заголовки запроса - содержит больше информации о ресурсе, который нужно получить, или о клиенте.
3. Заголовки ответа - содержат дополнительную информацию об ответе или о сервере.
4. Заголовки сущности - содержат информацию о теле ресурса, например его длину содержимого или тип.

### Статус ответа говорит об успешности выполнения запроса:

1. Информационные ответы: коды 100–199
    1) `100 Continue` — указывает, что запрос успешно принят. Клиент может продолжать присылать запросы.
    2) `102 Processing` — запрос получен сервером, но его обработка ещё не завершена.
2. Успешные ответы: коды 200–299
    1) `200 OK` — запрос принят и корректно обработан веб-сервером.
    2) `201 Created` — запрос корректно обработан и в результате был создан новый ресурс. Обычно он присылается в ответ
       на POST запрос.
3. Редиректы: коды 300–399
    1) `301 Moved Permanently` — запрашиваемый ресурс на постоянной основе переехал на новый адрес.
    2) `302 Found` — указывает, что целевой ресурс временно доступен по другому URl
4. Клиентские ошибки: коды 400–499
    1) `400 Bad Request` — запрос от клиента к веб-серверу составлен некорректно.
    2) `404 Not Found` — сервер не смог найти запрашиваемый ресурс.
    3) `405 Method Not Allowed` — сервер не поддерживает http метод.
5. Серверные ошибки: коды 500–599
    1) `500 Internal Server Error` — на сервере произошла непредвиденная ошибка.
    2) `505 HTTP Version Not Supported` — версия HTTP, используемая в запросе, не поддерживается сервером.

### Отправка HTTP запросов из java приложений

Для отправки http запросов со стороны java можно использовать различные библиотеки или встроенное API.

Наиболее популярными библиотеками являются:

1. ApacheHttpClient (+ Apache Fluent API);
2. OkHttp (чаще используется на мобильных устройствах);
3. Spring WebClient (для приложений на Spring).

### Отправка запросов через HttpClient, начиная с Java 11.

Характеристики:

1. HttpClient поддерживает web-сокеты, версии http: HTTP/1.1 и HTTP/2
2. Поддерживает синхронную и асинхронную отправку запросов
3. Есть поддержка cookie

Типы данных и передача сообщений:

1. `HttpClient` используется для отправки запроса. Позволяет указать версию http протокола, данные об ssl, разрешить или
   запретить автоматические редиректы. Объект создается и настраивается через Builder.
2. `HttpRequest` используется для создания запроса, который должен быть отправлен клиентом. Позволяет указать строку
   запроса, метод запроса, установить заголовки, добавить передаваемые данные в тело сообщения. Объект создается и
   настраивается через Builder.
3. `HttpResponse` создается, когда клиент получает ответ. Позволяет получить статус ответа, заголовки и данные из тела
   сообщения.


      HttpClient client = HttpClient.newBuilder() // клиент
                .version(HttpClient.Version.HTTP_1_1) // версия http протокола 1.1
                .followRedirects(HttpClient.Redirect.NEVER) // перенаправление запрещено
                .build();

        // GET запрос
        HttpRequest getRequest = HttpRequest.newBuilder() // передаваемый запрос
                .uri(new URI("http://localhost:8080/editions")) // строка запроса
                .GET() // метод передачи запроса
                .header("Content-Type", "application/json") // клиент ожидает ответа в Json формате
                .build();

        // асинхронная (sendAsync) отправка запроса getRequest
        // BodyHandlers.ofString() - данные из тела сообщения должны быть получены в виде строки
        client.sendAsync(getRequest, HttpResponse.BodyHandlers.ofString())
                .thenApply(HttpResponse::body) // когда ответ будет получен, вернуть тело сообщения
                .thenAccept(System.out::println) // после этого вывести тело сообщения в консоль
                .join();

        // синхронная отправка запроса getRequest (поток приостановит работу в ожидании ответа)
        // BodyHandlers.ofString() - данные из тела сообщения должны быть получены в виде строки
        HttpResponse<String> response = client.send(getRequest, HttpResponse.BodyHandlers.ofString());
        String serverAnswer01 = response.body(); // строка из тела ответного сообщения

        // POST запрос
        List<String> values = List.of("tom", "mike", "alice");
        String data = new ObjectMapper().objectMapper.writeValueAsString(values);
        HttpRequest postRequest = HttpRequest.newBuilder() // передаваемый запрос
                .uri(new URI("http://localhost:8080/editions")) // строка запроса
                .POST(HttpRequest.BodyPublishers.ofString(data)) // метод передачи запроса,
                // BodyPublishers.ofString - в теле сообщения передается строка
                .header("Content-Type", "application/json") // клиент ожидает ответа в Json формате
                .build();

        // асинхронная (sendAsync) отправка запроса postRequest
        client.sendAsync(postRequest, HttpResponse.BodyHandlers.ofString())
                .thenApply(HttpResponse::body) // когда ответ будет получен, вернуть тело сообщения
                .thenAccept(System.out::println) // после этого вывести тело сообщения в консоль
                .join();

        // синхронная отправка запроса postRequest (поток приостановит работу в ожидании ответа)
        HttpResponse<String> postResponse = client.send(getRequest, HttpResponse.BodyHandlers.ofString());
        String serverAnswer02 = postResponse.body(); // строка из тела ответного сообщения
